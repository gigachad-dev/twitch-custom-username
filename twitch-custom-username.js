var __defProp=Object.defineProperty,__defNormalProp=(r,s,a)=>s in r?__defProp(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a,__publicField=(r,s,a)=>(__defNormalProp(r,typeof s!="symbol"?s+"":s,a),a),__accessCheck=(r,s,a)=>{if(!s.has(r))throw TypeError("Cannot "+a)},__privateGet=(r,s,a)=>(__accessCheck(r,s,"read from private field"),a?a.call(r):s.get(r)),__privateAdd=(r,s,a)=>{if(s.has(r))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(r):s.set(r,a)},__privateSet=(r,s,a,f)=>(__accessCheck(r,s,"write to private field"),f?f.call(r,a):s.set(r,a),a);(function(){var r,s,a;function f(n,t,e){const i=new MutationObserver((o,c)=>{for(const d of o)t(d,c)});return i.observe(n,{childList:!0,subtree:!0,...e}),()=>i.disconnect()}const y="chat-line__message",I="user-notice-line",h="chat-author__display-name",p="data-user-id",l="customNames";function C(){let n;function t(e){if(!n){const i=Object.keys(e);if(!i.length)throw new Error("ReactInstance is not defined");n=i[0]}return e[n]}return{getUserId(e){const i=t(e);return i.return.key?i.return.key.split("-").at(0):null}}}function m(n){return Object.entries(n)}const g=(n,t)=>n;class E{constructor({encode:t=g,decode:e=g,attributes:i={},initialValue:o}={}){if(__privateAdd(this,r,void 0),__privateAdd(this,s,void 0),__privateAdd(this,a,void 0),__privateSet(this,r,t),__privateSet(this,s,e),this.attributes=i,o)for(const[c,d]of m(o))this.has(c)||this.set(c,d)}get attributes(){return __privateGet(this,a)}set attributes(t){__privateSet(this,a,t)}get(t){const e=`; ${document.cookie}`.match(`;\\s*${t}=([^;]+)`);return e?__privateGet(this,s).call(this,decodeURIComponent(e[1]),t):null}set(t,e,i){const o={path:"/",...__privateGet(this,a),...i};typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires instanceof Date&&(o.expires=o.expires.toUTCString());let c=`${encodeURIComponent(t)}=${encodeURIComponent(__privateGet(this,r).call(this,e,t))}`;for(const[d,v]of m(o))c+=`; ${d}`,v!==!0&&(c+=`=${v}`);document.cookie=c}list(){const t=document.cookie,e=(t?t.split("; "):[]).map(i=>{const[o,c]=i.split(/=(.*)/);return[o,__privateGet(this,s).call(this,decodeURIComponent(c),o)]});return Object.fromEntries(e)}remove(t,e){this.set(t,null,{...e,expires:-1})}has(t){return!!this.get(t)}}r=new WeakMap,s=new WeakMap,a=new WeakMap;class N extends E{constructor(){super({initialValue:{[l]:[]},attributes:{domain:"twitch.tv","max-age":60*60*24*365},encode(t){return JSON.stringify(t)},decode(t){try{return JSON.parse(t)}catch{return null}}}),__publicField(this,"values"),this.values=this.get(l)}write(t){this.values=JSON.parse(t),this.set(l,this.values)}addCustomName(t){const e=this.get(l);this.values=e.filter(i=>i[0]!==t[0]),this.values.push(t),this.set(l,this.values)}getCustomNameById(t){const e=this.values.find(i=>i[0]===t);return e?e[1]:null}}const u=new N,_=C();document.addEventListener("keydown",n=>{if(n.altKey&&n.code==="KeyZ"&&(n.preventDefault(),navigator.clipboard.writeText(JSON.stringify(u.values)).then(()=>alert("Copied to clipboard!"))),n.altKey&&n.code==="KeyX"){n.preventDefault();const t=prompt("Set a new storage value:",JSON.stringify(u.values));t&&u.write(t)}}),document.addEventListener("contextmenu",n=>{const t=n.target;if(n.ctrlKey&&t.classList.contains(h)){n.preventDefault();const e=_.getUserId(t)||t.parentElement.parentElement.getAttribute(p)||t.parentElement.parentElement.parentElement.getAttribute(p);if(!e){alert("User id is not defined");return}const i=u.getCustomNameById(e),o=prompt(`Set a custom name for ${t.textContent}:`,i??"");if(o===null)return;u.addCustomName([e,o])}}),f(document.body,n=>{w(n)});function w(n){for(const t of n.addedNodes){if(t.nodeName==="#text")continue;const e=t;if(!(e.classList.contains(y)||e.classList.contains(I)))continue;const o=e.querySelector(`.${h}`);if(!o)continue;const c=S(e,o);c&&(o.innerHTML=`${o.textContent} (${c})`)}}function S(n,t){const e=n.getAttribute(p);if(e)return u.getCustomNameById(e);{const i=_.getUserId(t);return i?u.getCustomNameById(i):null}}})();
