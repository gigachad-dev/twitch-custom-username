var __defProp=Object.defineProperty,__defNormalProp=(s,e,a)=>e in s?__defProp(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,__publicField=(s,e,a)=>(__defNormalProp(s,typeof e!="symbol"?e+"":e,a),a),__accessCheck=(s,e,a)=>{if(!e.has(s))throw TypeError("Cannot "+a)},__privateGet=(s,e,a)=>(__accessCheck(s,e,"read from private field"),a?a.call(s):e.get(s)),__privateAdd=(s,e,a)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,a)},__privateSet=(s,e,a,c)=>(__accessCheck(s,e,"write to private field"),c?c.call(s,a):e.set(s,a),a);(function(){var s,e,a,c,d;function f(i,t,r){const n=new MutationObserver((o,u)=>{for(const I of o)t(I,u)});return n.observe(i,{childList:!0,subtree:!0,...r}),()=>n.disconnect()}function m(){let i;function t(r){if(!i){const n=Object.keys(r);if(!n.length)throw new Error("ReactInstance is not defined");i=n[0]}return r[i]}return{getUserId(r){const n=t(r);return n.return.key?n.return.key.split("-").at(0):null}}}class p{constructor(t,r,n,o){__privateAdd(this,s,void 0),__privateAdd(this,e,void 0),__privateAdd(this,a,void 0),__privateAdd(this,c,void 0),__privateAdd(this,d,void 0),__privateSet(this,s,t),__privateSet(this,e,r),__privateSet(this,d,n),__privateSet(this,a,u=>o?.encode?o.encode(u):JSON.stringify(u)),__privateSet(this,c,u=>o?.decode?o.decode(u):JSON.parse(u)),this.has()||this.write(__privateGet(this,e))}get initialValue(){return __privateGet(this,e)}get value(){try{const t=__privateGet(this,d).getItem(__privateGet(this,s));return t?__privateGet(this,c).call(this,t):__privateGet(this,e)}catch(t){return console.error(t),__privateGet(this,e)}}write(t){t instanceof Function&&(t=t(this.value));try{__privateGet(this,d).setItem(__privateGet(this,s),__privateGet(this,a).call(this,t))}catch(r){return console.error(r),__privateGet(this,e)}return t}has(){return __privateGet(this,d).getItem(__privateGet(this,s))!==null}reset(){this.write(__privateGet(this,e))}}s=new WeakMap,e=new WeakMap,a=new WeakMap,c=new WeakMap,d=new WeakMap;class _ extends p{constructor(t,r,n){super(t,r,localStorage,n)}}class v extends _{constructor(){super("custom-usernames",[]),__publicField(this,"users"),this.read()}read(){this.users=this.value}addCustomName(t){this.write(r=>(this.users=r.filter(n=>n[0]!==t[0]),this.users.push(t),this.users))}getCustomNameById(t){const r=this.users.find(n=>n[0]===t);return r?r[1]:null}}const h=new v,l=m();document.addEventListener("contextmenu",i=>{const t=i.target;if(i.ctrlKey&&t.classList.contains("chat-author__display-name")){i.preventDefault();const r=l.getUserId(t)||t.parentElement.parentElement.parentElement.getAttribute("data-user-id"),n=h.getCustomNameById(r),o=prompt(`Set a custom name for ${t.textContent}:`,n??"");if(o===null)return;h.addCustomName([r,o])}}),f(document.body,(i,t)=>{g(i)});function g(i){for(const t of i.addedNodes){if(t.nodeName==="#text")continue;const r=t;if(!r.classList.contains("chat-line__message"))continue;const n=r.querySelector(".chat-author__display-name");if(!n)continue;const o=y(r,n);o&&(n.textContent=`${n.textContent} (${o})`)}}function y(i,t){const r=i.getAttribute("data-user-id");if(r)return h.getCustomNameById(r);{const n=l.getUserId(t);return n?h.getCustomNameById(n):null}}})();
