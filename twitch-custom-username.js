var __defProp=Object.defineProperty,__defNormalProp=(i,s,o)=>s in i?__defProp(i,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[s]=o,__publicField=(i,s,o)=>(__defNormalProp(i,typeof s!="symbol"?s+"":s,o),o),__accessCheck=(i,s,o)=>{if(!s.has(i))throw TypeError("Cannot "+o)},__privateGet=(i,s,o)=>(__accessCheck(i,s,"read from private field"),o?o.call(i):s.get(i)),__privateAdd=(i,s,o)=>{if(s.has(i))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(i):s.set(i,o)},__privateSet=(i,s,o,f)=>(__accessCheck(i,s,"write to private field"),f?f.call(i,o):s.set(i,o),o);(function(){var i,s,o;function f(n,t,e){const r=new MutationObserver((a,c)=>{for(const l of a)t(l,c)});return r.observe(n,{childList:!0,subtree:!0,...e}),()=>r.disconnect()}const y="chat-line__message",h="chat-author__display-name",p="data-user-id",d="customNames";function I(){let n;function t(e){if(!n){const r=Object.keys(e);if(!r.length)throw new Error("ReactInstance is not defined");n=r[0]}return e[n]}return{getUserId(e){const r=t(e);return r.return.key?r.return.key.split("-").at(0):null}}}function m(n){return Object.entries(n)}const g=(n,t)=>n;class C{constructor({encode:t=g,decode:e=g,attributes:r={},initialValue:a}={}){if(__privateAdd(this,i,void 0),__privateAdd(this,s,void 0),__privateAdd(this,o,void 0),__privateSet(this,i,t),__privateSet(this,s,e),this.attributes=r,a)for(const[c,l]of m(a))this.has(c)||this.set(c,l)}get attributes(){return __privateGet(this,o)}set attributes(t){__privateSet(this,o,t)}get(t){const e=`; ${document.cookie}`.match(`;\\s*${t}=([^;]+)`);return e?__privateGet(this,s).call(this,decodeURIComponent(e[1]),t):null}set(t,e,r){const a={path:"/",...__privateGet(this,o),...r};typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires instanceof Date&&(a.expires=a.expires.toUTCString());let c=`${encodeURIComponent(t)}=${encodeURIComponent(__privateGet(this,i).call(this,e,t))}`;for(const[l,_]of m(a))c+=`; ${l}`,_!==!0&&(c+=`=${_}`);document.cookie=c}list(){const t=document.cookie,e=(t?t.split("; "):[]).map(r=>{const[a,c]=r.split(/=(.*)/);return[a,__privateGet(this,s).call(this,decodeURIComponent(c),a)]});return Object.fromEntries(e)}remove(t,e){this.set(t,null,{...e,expires:-1})}has(t){return!!this.get(t)}}i=new WeakMap,s=new WeakMap,o=new WeakMap;class N extends C{constructor(){super({initialValue:{[d]:[]},attributes:{domain:"twitch.tv","max-age":60*60*24*365},encode(t){return JSON.stringify(t)},decode(t){try{return JSON.parse(t)}catch{return null}}}),__publicField(this,"values"),this.values=this.get(d)}write(t){this.values=JSON.parse(t),this.set(d,this.values)}addCustomName(t){const e=this.get(d);this.values=e.filter(r=>r[0]!==t[0]),this.values.push(t),this.set(d,this.values)}getCustomNameById(t){const e=this.values.find(r=>r[0]===t);return e?e[1]:null}}const u=new N,v=I();document.addEventListener("keydown",n=>{if(n.altKey&&n.code==="KeyZ"&&(n.preventDefault(),navigator.clipboard.writeText(JSON.stringify(u.values)).then(()=>alert("Copied to clipboard!"))),n.altKey&&n.code==="KeyX"){n.preventDefault();const t=prompt("Set a new storage value:",JSON.stringify(u.values));t&&u.write(t)}}),document.addEventListener("contextmenu",n=>{const t=n.target;if(n.ctrlKey&&t.classList.contains(h)){n.preventDefault();const e=v.getUserId(t)||t.parentElement.parentElement.getAttribute(p)||t.parentElement.parentElement.parentElement.getAttribute(p);if(!e){alert("User id is not defined");return}const r=u.getCustomNameById(e),a=prompt(`Set a custom name for ${t.textContent}:`,r??"");if(a===null)return;u.addCustomName([e,a])}}),f(document.body,n=>{w(n)});function w(n){for(const t of n.addedNodes){if(t.nodeName==="#text")continue;const e=t;if(!e.classList.contains(y))continue;const r=e.querySelector(`.${h}`);if(!r)continue;const a=E(e,r);a&&(r.innerHTML=`${r.textContent} (${a})`)}}function E(n,t){const e=n.getAttribute(p);if(e)return u.getCustomNameById(e);{const r=v.getUserId(t);return r?u.getCustomNameById(r):null}}})();
