var __defProp=Object.defineProperty,__defNormalProp=(s,e,r)=>e in s?__defProp(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,__publicField=(s,e,r)=>(__defNormalProp(s,typeof e!="symbol"?e+"":e,r),r),__accessCheck=(s,e,r)=>{if(!e.has(s))throw TypeError("Cannot "+r)},__privateGet=(s,e,r)=>(__accessCheck(s,e,"read from private field"),r?r.call(s):e.get(s)),__privateAdd=(s,e,r)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,r)},__privateSet=(s,e,r,u)=>(__accessCheck(s,e,"write to private field"),u?u.call(s,r):e.set(s,r),r);(function(){var s,e,r,u,d;function p(i,t,n){const a=new MutationObserver((o,c)=>{for(const h of o)t(h,c)});return a.observe(i,{childList:!0,subtree:!0,...n}),()=>a.disconnect()}function m(){let i;function t(n){if(!i){const a=Object.keys(n);if(!a.length)throw new Error("ReactInstance is not defined");i=a[0]}return n[i]}return{getUserId(n){return t(n).return.key.split("-").at(0)}}}class _{constructor(t,n,a,o){__privateAdd(this,s,void 0),__privateAdd(this,e,void 0),__privateAdd(this,r,void 0),__privateAdd(this,u,void 0),__privateAdd(this,d,void 0),__privateSet(this,s,t),__privateSet(this,e,n),__privateSet(this,d,a),__privateSet(this,r,c=>o?.encode?o.encode(c):JSON.stringify(c)),__privateSet(this,u,c=>o?.decode?o.decode(c):JSON.parse(c)),this.has()||this.write(__privateGet(this,e))}get initialValue(){return __privateGet(this,e)}get value(){try{const t=__privateGet(this,d).getItem(__privateGet(this,s));return t?__privateGet(this,u).call(this,t):__privateGet(this,e)}catch(t){return console.error(t),__privateGet(this,e)}}write(t){t instanceof Function&&(t=t(this.value));try{__privateGet(this,d).setItem(__privateGet(this,s),__privateGet(this,r).call(this,t))}catch(n){return console.error(n),__privateGet(this,e)}return t}has(){return __privateGet(this,d).getItem(__privateGet(this,s))!==null}reset(){this.write(__privateGet(this,e))}}s=new WeakMap,e=new WeakMap,r=new WeakMap,u=new WeakMap,d=new WeakMap;class v extends _{constructor(t,n,a){super(t,n,localStorage,a)}}class g extends v{constructor(){super("custom-usernames",[]),__publicField(this,"users"),this.read()}read(){this.users=this.value}addCustomName(t){this.write(n=>(this.users=n.filter(a=>a[0]!==t[0]),this.users.push(t),this.users))}getCustomNameById(t){const n=this.users.find(a=>a[0]===t);return n?n[1]:null}}const l=new g,f=m();document.addEventListener("contextmenu",i=>{const t=i.target;if(i.ctrlKey&&t.classList.contains("chat-author__display-name")){i.preventDefault();const n=f.getUserId(t),a=l.getCustomNameById(n),o=prompt(`Set a custom name for ${t.textContent}:`,a??"");if(o===null)return;l.addCustomName([n,o])}}),p(document.body,(i,t)=>{I(i)});function I(i){for(const t of i.addedNodes){if(t.nodeName==="#text")continue;const n=t;if(!n.classList.contains("chat-line__message"))continue;const o=n.querySelector(".chat-author__display-name");if(!o)continue;const c=f.getUserId(o),h=l.getCustomNameById(c);h&&(o.textContent=`${o.textContent} (${h})`)}}})();
